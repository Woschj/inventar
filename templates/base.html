<!DOCTYPE html>
<html lang="de" data-theme="corporate">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Inventar{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'btz-blue': '#004B87',
                        'btz-gray': '#58585A',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #004B87 !important;
            --primary-focus: #003666 !important;
            --primary-content: #ffffff !important;
        }
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .navbar-blur {
            backdrop-filter: blur(8px);
            background-color: rgba(0, 75, 135, 0.97);
        }

        .nav-dropdown {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(-8px);
            visibility: hidden;
            background-color: white;
            border: 1px solid rgba(0, 75, 135, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .group:hover .nav-dropdown {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }

        .nav-link {
            @apply text-white opacity-80 hover:opacity-100 px-3 py-2 text-sm font-medium transition-all duration-200
                   border-b-2 border-transparent hover:border-white;
        }

        .nav-link.active {
            @apply opacity-100 border-white;
        }

        .dropdown-item {
            @apply flex items-center px-4 py-2 text-sm text-btz-gray hover:text-btz-blue hover:bg-gray-50
                   transition-colors duration-150 border-l-4 border-transparent hover:border-btz-blue;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- Moderne Navigationsleiste -->
    <div class="w-full fixed top-0 z-50">
        <nav class="navbar-blur shadow-lg">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center h-16">
                    <!-- Logo mit Animation -->
                    <div class="flex-shrink-0 flex items-center">
                        <a href="{{ url_for('index') }}" class="flex items-center space-x-2 transition-transform hover:scale-105">
                            <img class="h-12 w-auto" 
                                 src="{{ url_for('static', filename='images/Logo-BTZ-WEISS.svg') }}" 
                                 alt="BTZ Logo">
                        </a>
                    </div>

                    <!-- Navigation Links -->
                    <div class="flex items-center space-x-4">
                        <a href="{{ url_for('index') }}" class="nav-link">
                            <i class="fas fa-home mr-2"></i>Start
                        </a>

                        {% if g.menu_categories %}
                            {% for department, categories in g.menu_categories.items() %}
                                <div class="relative group">
                                    <button class="nav-link flex items-center">
                                        <span>{{ department }}</span>
                                        <i class="fas fa-chevron-down ml-2 text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                                    </button>
                                    <div class="nav-dropdown absolute left-0 mt-1 w-56 rounded-md">
                                        <div class="py-1 rounded-md">
                                            {% for category in categories %}
                                                <a href="{{ url_for('list_category_items', category_id=category.id) }}"
                                                   class="dropdown-item">
                                                    <i class="fas fa-folder-open mr-3 text-btz-blue"></i>
                                                    {{ category.name }}
                                                </a>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}

                        <!-- Admin Bereich -->
                        {% if session.get('is_admin') %}
                            <div class="relative group">
                                <button class="nav-link flex items-center">
                                    <i class="fas fa-user-shield mr-2"></i>
                                    <span>Admin</span>
                                    <i class="fas fa-chevron-down ml-2 text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                                </button>
                                <div class="nav-dropdown absolute right-0 mt-1 w-56 rounded-md">
                                    <div class="py-1 rounded-md">
                                        <a href="{{ url_for('admin_categories') }}" class="dropdown-item">
                                            <i class="fas fa-cogs mr-3 text-btz-blue"></i>
                                            Kategorien verwalten
                                        </a>
                                        <a href="{{ url_for('logout') }}" class="dropdown-item">
                                            <i class="fas fa-sign-out-alt mr-3 text-red-500"></i>
                                            Logout
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <a href="{{ url_for('login') }}" class="nav-link">
                                <i class="fas fa-sign-in-alt mr-2"></i>Login
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <!-- Hauptinhalt -->
    <main class="container mx-auto px-4 pt-24 pb-8">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert {{ 'alert-error' if category == 'error' else 'alert-success' }} shadow-lg mb-4 animate-fade-in">
                        <div>
                            <i class="fas {{ 'fa-exclamation-circle' if category == 'error' else 'fa-check-circle' }}"></i>
                            <span>{{ message }}</span>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    {% block scripts %}{% endblock %}
</body>
</html>